<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Document</title>
   </head>
   <body>
      <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
      <div style="text-align: center">
         <div id="reader" style="max-width: 100%; height: 100%;"></div>
         <div id="show" style="display: none">
            <h4>Scanned Result:</h4>
            <p id="result"></p>
         </div>
         <button onclick="scanBarcode()">Scan</button>
      </div>
      <script>
         function scanBarcode() {
            const html5QRcode = new Html5Qrcode("reader");
            const qrCodeSuccessCallback = (decodedText, decodedResult) => {
               if (decodedText) {
                  document.getElementById("show").style.display = "block";
                  document.getElementById("result").textContent = decodedText;
                  html5QRcode.stop();
                  fetch(`https://thewishlistco.stoplight.io/api/v2/products/variants/${decodedText}/byBarcode`, {
                     method: "GET",
                     headers: {
                        "X-TWC-Tenant": "incu-2",
                     },
                  })
                     .then((response) => response.json())
                     .then((data) => {
                        console.log(data);
                     })
                     .catch((error) => {
                        console.error("Error:", error);
                     })
                  }; 
            };

            const config = {
               fps: 10,
               qrbox: { width: 200, height: 100 },
            };
            html5QRcode.start({ facingMode: "environment" }, config, qrCodeSuccessCallback);
         }
      </script>
   </body>
</html>
