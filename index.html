<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Document</title>
      <style>
         /* body {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
         } */
         #reader {
            max-width: 100%;
            height: 100%;
         }
         #show {
            display: none;
         }
         #init-scan-btn {
            height: 40px;
            width: 100px;
            display: flex;
            align-items: center;
            font-size: 14px;
            column-gap: 6px;
            text-transform: uppercase;
            letter-spacing: 1px;
            background-color: black;
            color: white;
            cursor: pointer;
         }
      </style>
   </head>
   <body>
      <div style="text-align: center">
         <div id="reader"></div>
         <div id="show">
            <h4>Scanned Result:</h4>
            <p id="result"></p>
            <h3>Product:</h3>
            <p id="product-result"></p>
         </div>
         <button id="init-scan-btn" onclick="startBarcodeScanner()">
            <svg width="30px" height="30px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
               <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M6.75 4.5H3V8.25H4.5V6H6.75V4.5ZM6.75 8.25V15.75H8.25V8.25H6.75ZM9.75 15.75V8.25H11.25V15.75H9.75ZM12.75 8.25V15.75H14.25V8.25H12.75ZM15.75 15.75V8.25H17.25V15.75H15.75ZM17.25 19.5H21V15.75H19.5V18H17.25V19.5ZM3 19.5V15.75H4.5L4.5 18H6.75L6.75 19.5H3ZM21 8.25V4.5H17.25V6H19.5V8.25L21 8.25Z"
                  fill="#fff"
               />
            </svg>
            <p>Scan</p>
         </button>
      </div>
   </body>
   <script src="scanner.js"></script>
   <script>
      async function startBarcodeScanner() {
         const accessToken =
            "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJRWlJkS3JabXJmMEk3WkhXRUtqNWRLTEhQanFubWJFeV9iNmpSbHdya1drIn0.eyJleHAiOjE3MTk1OTU5MjAsImlhdCI6MTcxOTU1MjcyMCwianRpIjoiNWJhZWNmOTMtYjM5Mi00MjdiLTk1Y2ItNDI5YTAzODI2Y2M4IiwiaXNzIjoiaHR0cHM6Ly9hdXRoLmF1LWF3cy50aGV3aXNobGlzdC5pby9hdXRoL3JlYWxtcy90d2NNYWluIiwiYXVkIjpbInJlYWxtLW1hbmFnZW1lbnQiLCJhY2NvdW50Il0sInN1YiI6IjJkMWI5ZmE1LThjYmQtNDRlYi1hM2QxLTkxMDZhYTVhZDM0ZiIsInR5cCI6IkJlYXJlciIsImF6cCI6InR3Yy1hcGktY2xpZW50IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL2xvY2FsaG9zdCJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsib2ZmbGluZV9hY2Nlc3MiLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsibWFuYWdlLXVzZXJzIiwidmlldy1jbGllbnRzIiwibWFuYWdlLWNsaWVudHMiLCJxdWVyeS1jbGllbnRzIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6InByb2ZpbGUgZW1haWwiLCJjbGllbnRIb3N0IjoiMTkyLjE2OC4xMTQuMTAiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImNsaWVudElkIjoidHdjLWFwaS1jbGllbnQiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtdHdjLWFwaS1jbGllbnQiLCJjbGllbnRBZGRyZXNzIjoiMTkyLjE2OC4xMTQuMTAifQ.gLSm8U1LP0PB329J7cPrfeyyR7R0n86fL8rCpXNi7WkxGGR6rQVWifWMrN0plIk1aq7VsY9-HkFx9JVQFPqPbp01G4GLNetschk12aPi4rPOCLN2gOph1auQROJF86qsp2bQyMPP4aGySIYBHV_CNlXwFRbIWyMWb06yTrYYoNZWpG_pmjWeD-tuzMAlY1yOhblvFNOZZgE4_jMjCwZ5wrXCe9JeOywMyBDUNaP9L9kYb3K0wgPp5Rzbv4blU47uzM5IpBH0BIyDvx6p9fui2xCNOY03tCIttAGaCGOwiR4xEtWPE8_cQbBcz0qlXhVyuPuNUCfnLBHNA4zVYcb9BA";
         const tenant = "viktoria-woods";
         const scanner = new BarcodeScanner(accessToken, tenant);
         try {
            const productInfo = await scanner.scanBarcode();
            console.log("productInfo: ", productInfo);
            document.getElementById("show").style.display = "block";
            const el = document.getElementById("result");
            el.textContent = productInfo.barcode;
            document.getElementById("product-result").innerText = JSON.stringify(productInfo);
         } catch (error) {
            console.error("Error scanning barcode:", error);
         }
      }
   </script>
</html>
