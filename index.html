<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Document</title>
      <style>
         /* body {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
         } */
         #reader-wrapper {
            position: absolute;
            display: none;
            top: 0;
            left: 0;
            width: 100%;
            /* height: 100%; */
            /* display: flex;
            justify-content: center;
            align-items: center; */
         }
         #reader {
            height: 100%;
            width: 100%;
            max-width: 100%;
         }
         #show {
            display: none;
         }
         #init-scan-btn {
            margin: 50px auto;
            height: 40px;
            width: 100px;
            display: flex;
            align-items: center;
            font-size: 14px;
            column-gap: 6px;
            text-transform: uppercase;
            letter-spacing: 1px;
            background-color: black;
            color: white;
            cursor: pointer;
         }
      </style>
   </head>
   <body>
      <div style="text-align: center">
         <div id="show">
            <h4>Scanned Result:</h4>
            <p id="result"></p>
            <h3>Product:</h3>
            <article id="product-result">
               <!-- <div>
                  <img src="{productInfo.imageLink}" alt="" />
                  <p>${productInfo.title}</p>
                  <p>{productInfo.price.price}</p>
                  <button>Add to wishlist</button>
               </div> -->
            </article>
         </div>
         <div id="reader-wrapper"><div id="reader"></div></div>
         <button id="init-scan-btn" onclick="startBarcodeScanner()">
            <svg width="30px" height="30px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
               <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M6.75 4.5H3V8.25H4.5V6H6.75V4.5ZM6.75 8.25V15.75H8.25V8.25H6.75ZM9.75 15.75V8.25H11.25V15.75H9.75ZM12.75 8.25V15.75H14.25V8.25H12.75ZM15.75 15.75V8.25H17.25V15.75H15.75ZM17.25 19.5H21V15.75H19.5V18H17.25V19.5ZM3 19.5V15.75H4.5L4.5 18H6.75L6.75 19.5H3ZM21 8.25V4.5H17.25V6H19.5V8.25L21 8.25Z"
                  fill="#fff"
               />
            </svg>
            <p>Scan</p>
         </button>
      </div>
   </body>
   <script src="scanner.js"></script>
   <script>
      async function startBarcodeScanner() {
         const accessToken =
            "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJRWlJkS3JabXJmMEk3WkhXRUtqNWRLTEhQanFubWJFeV9iNmpSbHdya1drIn0.eyJleHAiOjE3MTk1NTU5MTksImlhdCI6MTcxOTU1NDcxOSwianRpIjoiYmY2MmQ0ZDEtYjc5Yi00NGI2LTkwMGUtOTg1MDYwZmU3NDk4IiwiaXNzIjoiaHR0cHM6Ly9hdXRoLmF1LWF3cy50aGV3aXNobGlzdC5pby9hdXRoL3JlYWxtcy90d2NNYWluIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjI2YTIyNTAyLWRhNzQtNDhkMC1iZWFiLTgzY2E0YTlmMDdlOSIsInR5cCI6IkJlYXJlciIsImF6cCI6InR3Yy1wb3MtY2xpZW50Iiwic2Vzc2lvbl9zdGF0ZSI6IjM1OGFmZmU1LTUzZjYtNGI3Ni05OTQyLTE0MGE2ZmNjZmFiNSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cHM6Ly9sb2NhbGhvc3QiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbInR3Yy1wb3MtdXNlciIsIm9mZmxpbmVfYWNjZXNzIiwidHdjLXN0b3JlLW93bmVyIiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6InRlbmFudGlkIHN0b3JlIHByb2ZpbGUgZW1haWwiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsInRlbmFudGlkIjoidmlrdG9yaWEtd29vZHMiLCJuYW1lIjoiTWF0dCBIYW1wc2hpcmUiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJtYXR0QHRoZXdpc2hsaXN0LmlvIiwic3RvcmUiOiIyMDUiLCJnaXZlbl9uYW1lIjoiTWF0dCIsImZhbWlseV9uYW1lIjoiSGFtcHNoaXJlIiwiZW1haWwiOiJtYXR0QHRoZXdpc2hsaXN0LmlvIn0.VxfbdpHZsq0Wu4p_GgzMW4iIazf7fW38aqEb7vYXsucoKxUMktMkegrSi_MesJkzoeaP2mKE4951aAI1hGHbhrRa08MUy8dIwtBaVF6KXPcxDdm4N9Wgs8c4rBQnqkx-5VlFIZMZKy904awN02iIkiMlPXyW51Q4L_ltrK_69e5OfsaT6NMU-XLwBqN8CMOtdPSOzcerfEwJ9j9yJoQl6DO8ETXr3xxO9GoI6lKYSojmJ4u_ddADIMkvh7lPXoSve32t85AXMR-CdO3ywVIGWNAmytmh4xXctNcXWXlhxNCj--OZfgebDqIhC1qYXhrvyM6PlhbBpD5YlWzPyFnORQ";
         const tenant = "viktoria-woods";
         const scanner = new BarcodeScanner(accessToken, tenant);
         try {
            const productInfo = await scanner.scanBarcode();
            console.log("productInfo: ", productInfo);
            document.getElementById("show").style.display = "block";
            const el = document.getElementById("result");
            el.textContent = productInfo.barcode;
            const productResult = document.getElementById("product-result");
            const productDiv = document.createElement("div");

            const productImage = document.createElement("img");
            productImage.src = productInfo.imageLink;
            productImage.alt = "product image";

            const productTitle = document.createElement("h3");
            productTitle.textContent = productInfo.title;

            const productPrice = document.createElement("p");
            productPrice.textContent = productInfo.price.price;

            const addToWishlistButton = document.createElement("button");
            addToWishlistButton.textContent = "Add to wishlist";

            productDiv.appendChild(productImage);
            productDiv.appendChild(productTitle);
            productDiv.appendChild(productPrice);
            productDiv.appendChild(addToWishlistButton);
            productResult.appendChild(productDiv);
         } catch (error) {
            console.error("Error scanning barcode:", error);
         }
      }
   </script>
</html>
